"use strict";var i=require("node:module"),d=require("node:worker_threads"),t=typeof document<"u"?document.currentScript:null;const u=o=>{const{sourceMapsEnabled:n}=process;process.setSourceMapsEnabled(!0);const{port1:e,port2:r}=new d.MessageChannel;return i.register(`./esm/index.mjs?${Date.now()}`,{parentURL:typeof document>"u"?require("url").pathToFileURL(__filename).href:t&&t.src||new URL("register-B0Z2jY-8.cjs",document.baseURI).href,data:{namespace:o?.namespace,port:r},transferList:[r]}),()=>(n===!1&&process.setSourceMapsEnabled(!1),console.log(1),e.postMessage("deactivate"),new Promise(a=>{console.log(2);const c=s=>{console.log(3),console.log({message:s}),s==="deactivated"&&a()};e.on("message",c)}))};exports.register=u;
