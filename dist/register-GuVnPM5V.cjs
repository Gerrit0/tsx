"use strict";var u=require("node:module"),d=require("node:worker_threads"),o=typeof document<"u"?document.currentScript:null;const i=t=>{const{sourceMapsEnabled:a}=process;process.setSourceMapsEnabled(!0);const{port1:e,port2:n}=new d.MessageChannel;if(u.register(`./esm/index.mjs?${Date.now()}`,{parentURL:typeof document>"u"?require("url").pathToFileURL(__filename).href:o&&o.src||new URL("register-GuVnPM5V.cjs",document.baseURI).href,data:{namespace:t?.namespace,port:n},transferList:[n]}),t?.onImport){const{onImport:s}=t;e.on("message",r=>{r.type==="load"&&s(r.url)}),e.unref()}return()=>(a===!1&&process.setSourceMapsEnabled(!1),e.postMessage("deactivate"),new Promise(s=>{const r=c=>{c.type==="deactivated"&&(console.log(22222),s(),e.off("message",r))};e.on("message",r),console.log(4)}))};exports.register=i;
