"use strict";var i=require("node:module"),u=require("node:worker_threads"),s=typeof document<"u"?document.currentScript:null;const d=n=>{const{sourceMapsEnabled:o}=process;process.setSourceMapsEnabled(!0);const{port1:e,port2:r}=new u.MessageChannel;return i.register(`./esm/index.mjs?${Date.now()}`,{parentURL:typeof document>"u"?require("url").pathToFileURL(__filename).href:s&&s.src||new URL("register-C3GYny0P.cjs",document.baseURI).href,data:{namespace:n?.namespace,port:r},transferList:[r]}),()=>(e.postMessage("deactivate"),o===!1&&process.setSourceMapsEnabled(!1),console.log(1),new Promise(a=>{const c=t=>{console.log({message:t}),t==="deactivated"&&a()};e.on("message",c),e.unref()}))};exports.register=d;
