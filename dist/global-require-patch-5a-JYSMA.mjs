import a from"node:module";import{t as j,f as u,a as d,i as E,r as b,b as v,c as F,l as O}from"./resolve-ts-path-z-vw6NP8.mjs";import P from"node:fs";import{fileURLToPath as y}from"node:url";import"esbuild";import"node:crypto";import"./index-bHZVXcAL.mjs";import{p}from"./client-Cg7nS93t.mjs";import _ from"node:path";import"get-tsconfig";const R=[".cts",".mts",".ts",".tsx",".jsx"],S=[".js",".cjs",".mjs"],l=Object.assign(Object.create(null),a._extensions),g=l[".js"],x=(s,e)=>{p?.send&&p.send({type:"dependency",path:e});const o=R.some(r=>e.endsWith(r)),n=S.some(r=>e.endsWith(r));if(!o&&!n)return g(s,e);let t=P.readFileSync(e,"utf8");t=j(e,t,o),s._compile(t,e)};[".js",".ts",".tsx",".jsx"].forEach(s=>{l[s]=x}),Object.defineProperty(l,".mjs",{value:x,enumerable:!1});const A=`${_.sep}node_modules${_.sep}`,m=a._resolveFilename.bind(a),h=(s,e,o,n)=>{const t=b(s);if(e?.filename&&(v.test(e.filename)||F)&&t)for(const r of t)try{return m(r,e,o,n)}catch(i){const{code:c}=i;if(c!=="MODULE_NOT_FOUND"&&c!=="ERR_PACKAGE_PATH_NOT_EXPORTED")throw i}},T=(s,e,o,n)=>{const t=s.indexOf("?");if(t!==-1&&(s=s.slice(0,t)),s.startsWith(u)&&(s=y(s)),d&&!E(s)&&!e?.filename?.includes(A)){const i=d(s);for(const c of i){const f=h(c,e,o,n);if(f)return f;try{return m(c,e,o,n)}catch{}}}const r=h(s,e,o,n);return r||m(s,e,o,n)},M=()=>{const{sourceMapsEnabled:s}=process,{_extensions:e,_resolveFilename:o}=a;return O(process.env.TSX_TSCONFIG_PATH),process.setSourceMapsEnabled(!0),a._extensions=l,a._resolveFilename=T,()=>{s===!1&&process.setSourceMapsEnabled(!1),a._extensions=e,a._resolveFilename=o}};export{T as a,M as r};
