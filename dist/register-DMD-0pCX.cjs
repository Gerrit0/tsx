"use strict";var d=require("node:module"),u=require("node:worker_threads"),a=typeof document<"u"?document.currentScript:null;const p=t=>{const{sourceMapsEnabled:c}=process;process.setSourceMapsEnabled(!0);const{port1:e,port2:n}=new u.MessageChannel;d.register(`./esm/index.mjs?${Date.now()}`,{parentURL:typeof document>"u"?require("url").pathToFileURL(__filename).href:a&&a.src||new URL("register-DMD-0pCX.cjs",document.baseURI).href,data:{namespace:t?.namespace,port:n},transferList:[n]});const r=t?.onImport&&(s=>{s.type==="load"&&onImport(s.url)});return r&&e.on("message",r),()=>(c===!1&&process.setSourceMapsEnabled(!1),r&&e.off("message",r),e.postMessage("deactivate"),new Promise(s=>{const o=i=>{i.type==="deactivated"&&(console.log(22222),s(),e.off("message",o))};e.on("message",o)}))};exports.register=p;
