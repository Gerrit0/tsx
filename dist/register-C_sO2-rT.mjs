import o from"node:module";import{MessageChannel as a}from"node:worker_threads";const n=r=>{process,process.setSourceMapsEnabled(!0);const{port1:s,port2:e}=new a;return o.register(`./esm/index.mjs?${Date.now()}`,{parentURL:import.meta.url,data:{namespace:r?.namespace,port:e},transferList:[e]}),()=>(console.log("unregister!"),s.postMessage("deactivate"),new Promise(t=>{t()}))};export{n as r};
