import o from"node:module";import{MessageChannel as n}from"node:worker_threads";const i=()=>{const{sourceMapsEnabled:r}=process;process.setSourceMapsEnabled(!0);const{port1:e,port2:s}=new n;return console.log("registering!"),o.register("./esm/index.mjs?1",{parentURL:import.meta.url,data:{port:s},transferList:[s]}),async()=>{e.postMessage("deactivate"),await new Promise(t=>{e.once("message",a=>{a==="deactivated"&&t()})}),r===!1&&process.setSourceMapsEnabled(!1)}};export{i as r};
