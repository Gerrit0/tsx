import t from"node:module";import{MessageChannel as a}from"node:worker_threads";const n=s=>{const{sourceMapsEnabled:r}=process;process.setSourceMapsEnabled(!0);const{port1:o,port2:e}=new a;return t.register(`./esm/index.mjs?${Date.now()}`,{parentURL:import.meta.url,data:{namespace:s?.namespace,port:e},transferList:[e]}),()=>(r===!1&&process.setSourceMapsEnabled(!1),console.log(1),o.postMessage("deactivate"),new Promise(p=>{}))};export{n as r};
